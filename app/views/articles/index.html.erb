<link rel="stylesheet" type="text/scss" href="articles.scss">

<div class="invisible">
<%= @articles = @arr[1] %>
<%= @most_active_user = @arr[0] %>
</div>

<nav class="row">
	<ul class="col-md-2 offset-md-0">
		<button class="btn btn-primary" id="filter">Filter</button>
		<!--%= link_to("Filter", articles_path, class: "btn btn-primary") %-->
		<ul>
			<li> <button class="btn btn-primary" id="company">Company</button></li>
			<li> <button class="btn btn-primary" id="industry_type">Industry type</button></li>
			<li> <button class="btn btn-primary" id="location">Location</button></li>
			<li> <button class="btn btn-primary" id="salary">Salary</button></li>
		</ul>
	</ul>
	<% if admin_signed_in? %>
		<ul class="col-md-2 offset-md-1">
			<%= link_to "Approve posts", admin_articles_path, :class => "btn btn-primary" %>
		</ul>
		<ul class="col-md-2 offset-md-3">
			<%= link_to "Look at feedbacks", admin_feedbacks_path, :class=> "btn btn-primary" %>   	
		</ul>	
	<% end %>
	<% if user_signed_in? %>
		<ul class = "col-md-2 offset-md-4">
			<%= link_to "Submit feedback", feedbacks_path, :class => "btn btn-primary" %>
		</ul>
	<% end %>

</nav>



<div class = "row">
	<div class = "col-md-2 offset-md-6">
		<% if @most_active_user.show_profile %> 
		      Most active user is: <%= link_to "#{@most_active_user.displayname}", profile_path(@most_active_user) %>
      		<% else %>
	      	     Most active user is: <%= "#{@most_active_user.displayname}" %>
      		<% end %>

	</div> 
	<% if user_signed_in? %>	
		<div class="col-md-2 offset-md-10">
			<%= link_to "+ Add Post", new_article_path, :class => "btn btn-primary" %>
		</div>
	<% end %>

<div class="company-list">
	<%= render 'articles', articles: @articles %>
</div>

<!-- pop up window -->
<nav>
<div class="salary_filter">
	<div class="salary_filter_content">
		<div class="close">+</div>
		Please fill in the range of salary you are looking for
		<!--%= form_with url: articles_path, method: :get, remote: true do |f| %>
			<div class="form-group">
				<!--%= f.label :compensation, "lower salary range:", class: "col-md-4 control-label" %>
				<div class="col-md-10">
					<!--%= f.number_field :compensation, step: 1, class: "form-control" %>
				</div>
			</div>
			<div class="form-group">
				<!--%= f.label :compensation, "higher salary range:", class: "col-md-4 control-label" %>
				<div class="col-md-10">
					<!--%= f.number_field :compensation, step: 1, class: "form-control" %>
				</div>
			</div>
			
			<span style="margin-left: 30%">
				<!--%= f.submit "Submit", class: "btn btn-default btn-primary" %>  
			</span-->
			
			<input id="low_salary", type="number", placeholder="lower salary range">Lower salary</input>
			<input id="high_salary", type="number", placeholder="upper salary range">Upper salary</input>
			<button class="btn btn-default btn-primary", id="filter_submit"> Submit </button>
		<!--% end %-->
	</div>
</div>
</nav>
<nav>
<div class="company_filter">
	<div class="company_filter_content">
		<div class="close">+</div>
		<% if @select_company %>
		Please select company
		<%= form_with url: articles_path, method: :get, remote: true do |f| %>
			<div class="form-group">
				<%= f.label :company, "Company:", class: "col-md-4 control-label" %>
				<div class="col-md-10">
					<%= f.select :company, options_for_select(@select_company), {:prompt => "Select company"}, {class: "form-control"}%>
				</div>
			</div>
			
			<span style="margin-left: 30%">
				<%= f.submit "Submit", class: "btn btn-default btn-primary"%>  
			</span>
			
			<!--input type="text" placeholder="lower salary range">
			<input type="text" placeholder="upper salary range">
			<a href="" class="filter_submit"> Submit </a-->
		<% end %>
		<% end %>
	</div>
</div>
</nav>
<nav>
<div class="industry_filter">
	<div class="industry_filter_content">
		<div class="close">+</div>
		<% if @select_industry %>
		Please select industry type
		<%= form_with url: articles_path, method: :get, remote: true do |f| %>
			<div class="form-group">
				<%= f.label :industry_type, "Industry Type:", class: "col-md-4 control-label" %>
				<div class="col-md-10">
					<%= f.select :industry_type, options_for_select(@select_industry), {:prompt => "Select industry"}, {class: "form-control"}%>
				</div>
			</div>
			
			<span style="margin-left: 30%">
				<%= f.submit "Submit", class: "btn btn-default btn-primary" %>  
			</span>
			
			<!--input type="text" placeholder="lower salary range">
			<input type="text" placeholder="upper salary range">
			<a href="" class="filter_submit"> Submit </a-->
		<% end %>
		<% end %>
	</div>
</div>
</nav>
<nav>
<div class="location_filter">
	<div class="location_filter_content">
		<div class="close">+</div>
		<% if @select_states && @select_city%>
		Please select state and city
		<%= form_with url: articles_path, method: :get, remote: true do |f| %>
			<div class="form-group">
				<%= f.label :state, "State:", class: "col-md-4 control-label" %>
				<div class="col-md-10">
					<%= f.select :state, options_for_select(@select_states), {:prompt => "Select state"}, {class: "form-control"}%>
				</div>
			</div>
			<div class="form-group">
				<%= f.label :city, "City:", class: "col-md-4 control-label" %>
				<div class="col-md-10">
					<%= f.select :city, options_for_select(@select_city), {:prompt => "Select city"}, {class: "form-control"}%>
					
				</div>
			</div>
			
			<span style="margin-left: 30%">
				<%= f.submit "Submit", class: "btn btn-default btn-primary" %>  
			</span>
			
			<!--input type="text" placeholder="lower salary range">
			<input type="text" placeholder="upper salary range">
			<a href="" class="filter_submit"> Submit </a-->
		<% end %>
		<% end %>
	</div>
</div>
</nav>

<nav aria-label="Pagination">
	<ul class="pagination justify-content-center"> 
		<%= will_paginate @articles %>
	</ul>
</nav> 

